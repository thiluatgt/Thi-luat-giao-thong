<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Trang thi</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>TRANG H·ªåC VI√äN</h2>
<div style="border:1px solid #999;padding:15px;margin-bottom:20px;background:#f9f9f9;">
  <h3>üìò Th√¥ng tin b√†i thi</h3>
  <ul>
    <li>S·ªë c√¢u h·ªèi: <b>30 c√¢u</b></li>
    <li>Th·ªùi gian l√†m b√†i: <b>20 ph√∫t</b></li>
    <li>T·ª∑ l·ªá ƒë·∫°t: <b>‚â• 80%</b></li>
    <li>M·ªói c√¢u ch·ªâ ch·ªçn <b>1 ƒë√°p √°n</b></li>
  </ul>

  <h3>‚ö†Ô∏è Quy ƒë·ªãnh & ch·ªëng gian l·∫≠n</h3>
  <ul>
    <li>Kh√¥ng m·ªü nhi·ªÅu tab tr√¨nh duy·ªát</li>
    <li>Kh√¥ng reload trang khi ƒëang l√†m b√†i</li>
    <li>H·ªá th·ªëng t·ª± ƒë·ªông ghi nh·∫≠n th·ªùi gian</li>
    <li>M·ªói h·ªçc vi√™n c√≥ th·ªÉ b·ªã kh√≥a n·∫øu vi ph·∫°m</li>
  </ul>
</div>

  <div id="studentInfo" style="border:1px solid #ccc;padding:15px;margin-bottom:20px;">
    <p><b>M√£ h·ªçc vi√™n:</b> <span id="infoCode"></span></p>
    <p><b>T√™n h·ªçc vi√™n:</b> <span id="infoName"></span></p>
    <p><b>Tr·∫°ng th√°i:</b> <span id="infoStatus"></span></p>
  </div>

  <button onclick="startExam()" style="font-size:18px;padding:12px 20px;background:green;color:white;border:none;border-radius:5px;">
    ‚ñ∂ TI·∫æP T·ª§C THI
  </button>

  <br><br>

  <button onclick="logout()" style="padding:8px 15px;">
    ƒêƒÉng xu·∫•t
  </button>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
  apiKey: "AIzaSyBGivIEsyBLsLs0CqRvwmwceG26duZbWlM",
  authDomain: "thi-luat-giao-thong.firebaseapp.com",
  projectId: "thi-luat-giao-thong",
  storageBucket: "thi-luat-giao-thong.firebasestorage.app",
  messagingSenderId: "173046681456",
  appId: "1:173046681456:web:33da411c508ee243a149b5"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const code = localStorage.getItem("studentCode");

    if (!code) {
      alert("B·∫°n ch∆∞a ƒëƒÉng nh·∫≠p");
      window.location.href = "index.html";
    }

    db.collection("students")
      .where("code", "==", code)
      .get()
      .then(snapshot => {
        if (snapshot.empty) {
          alert("Kh√¥ng t√¨m th·∫•y th√¥ng tin h·ªçc vi√™n");
          return;
        }

        const student = snapshot.docs[0].data();

        document.getElementById("infoCode").innerText = student.code;
        document.getElementById("infoName").innerText = student.name;
        document.getElementById("infoStatus").innerText = student.status;
      });

    function startExam() {
      alert("B∆∞·ªõc ti·∫øp theo s·∫Ω v√†o m√†n h√¨nh l√†m b√†i thi");
    }

    function logout() {
      localStorage.clear();
      window.location.href = "index.html";
    }
  </script>
</body>

<script>
  const userType = localStorage.getItem("userType");
  const studentCode = localStorage.getItem("studentCode");

  if (!userType) {
    window.location.href = "index.html";
  }

  if (userType === "student") {
    document.getElementById("welcome").innerText =
      "Xin ch√†o h·ªçc vi√™n: " + studentCode;
  } else {
    document.getElementById("welcome").innerText =
      "B·∫°n ƒëang thi v·ªõi t∆∞ c√°ch KH√ÅCH";
  }

  function startExam() {
    alert("B∆∞·ªõc ti·∫øp theo s·∫Ω hi·ªÉn th·ªã ƒë·ªÅ thi");
  }

  function logout() {
    localStorage.clear();
    window.location.href = "index.html";
  }
</script>

</body>
</html>
