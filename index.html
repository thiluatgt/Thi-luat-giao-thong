<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Thi Luáº­t Giao ThÃ´ng</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<body style="
  margin:0;
  font-family: 'Segoe UI', Arial;
  background: linear-gradient(135deg, #1d3557, #457b9d);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
">

  <div style="
    width:520px;
    background:#ffffff;
    border-radius:12px;
    padding:35px 40px;
    box-shadow:0 15px 40px rgba(0,0,0,0.25);
  ">

    <h2 style="
      text-align:center;
      margin-bottom:10px;
      color:#1d3557;
      line-height:1.4;
    ">
      Há»† THá»NG THI<br>
      LUáº¬T GIAO THÃ”NG ÄÆ¯á»œNG Bá»˜ TRá»°C TUYáº¾N
    </h2>

    <p style="
      text-align:center;
      color:#555;
      margin-bottom:30px;
      font-size:14px;
    ">
      Ná»n táº£ng thi vÃ  Ä‘Ã¡nh giÃ¡ kiáº¿n thá»©c luáº­t giao thÃ´ng
    </p>

    <!-- ÄÄ‚NG NHáº¬P Há»ŒC VIÃŠN -->
    <label style="font-weight:600;">MÃ£ há»c viÃªn</label>
    <input
      id="studentCode"
      type="text"
      placeholder="VÃ­ dá»¥: HV001"
      style="
        width:100%;
        padding:14px;
        margin-top:8px;
        margin-bottom:20px;
        border-radius:6px;
        border:1px solid #ccc;
        font-size:15px;
      "
    >

    <button
      onclick="loginStudent()"
      style="
        width:100%;
        padding:14px;
        background:#1d3557;
        color:#fff;
        border:none;
        border-radius:6px;
        font-size:17px;
        cursor:pointer;
      "
    >
      ğŸ” ÄÄƒng nháº­p há»‡ thá»‘ng
    </button>

    <div style="
      text-align:center;
      margin:25px 0;
      color:#999;
    ">
      â€” hoáº·c â€”
    </div>

    <!-- THI THá»¬ -->
    <button
      onclick="loginGuest()"
      style="
        width:100%;
        padding:14px;
        background:#2a9d8f;
        color:#fff;
        border:none;
        border-radius:6px;
        font-size:17px;
        cursor:pointer;
      "
    >
      ğŸ¯ Thi thá»­ khÃ´ng cáº§n Ä‘Äƒng nháº­p
    </button>

    <!-- GHI CHÃš -->
    <div style="
      margin-top:25px;
      font-size:13.5px;
      color:#555;
      line-height:1.6;
      text-align:center;
    ">
      Báº¡n chÆ°a Ä‘Äƒng kÃ½ mÃ£ há»c viÃªn?  
      Báº¡n cÃ³ thá»ƒ <b>thi thá»­</b> Ä‘á»ƒ tráº£i nghiá»‡m thá»±c táº¿ há»‡ thá»‘ng.
      <br><br>
      Äá»ƒ sá»­ dá»¥ng <b>Ä‘áº§y Ä‘á»§ cÃ¡c tÃ­nh nÄƒng</b> cá»§a website,  
      vui lÃ²ng liÃªn há»‡ <b>quáº£n trá»‹ viÃªn</b>.
    </div>

  </div>

</body>
<script>
function loginStudent() {
  const codeInput = document.getElementById("studentCode");
  if (!codeInput) {
    alert("KhÃ´ng tÃ¬m tháº¥y Ã´ nháº­p mÃ£ há»c viÃªn");
    return;
  }

  const code = codeInput.value.trim().toUpperCase();
  if (!code) {
    alert("Vui lÃ²ng nháº­p mÃ£ há»c viÃªn");
    return;
  }

  db.collection("students")
    .where("code", "==", code)
    .get()
    .then(snapshot => {
      if (snapshot.empty) {
        alert("âŒ MÃ£ há»c viÃªn khÃ´ng tá»“n táº¡i");
        return;
      }

      const student = snapshot.docs[0].data();

      if (student.status !== "Hoáº¡t Ä‘á»™ng") {
        alert("âŒ TÃ i khoáº£n há»c viÃªn Ä‘ang bá»‹ khÃ³a");
        return;
      }

      localStorage.setItem("userType", "student");
      localStorage.setItem("studentCode", student.code);
      localStorage.setItem("studentName", student.name);

      window.location.href = "exam.html";
    })
    .catch(err => {
      console.error(err);
      alert("âŒ Lá»—i káº¿t ná»‘i há»‡ thá»‘ng");
    });
}
</script>

<script>
function loginGuest() {
  localStorage.setItem("userType", "guest");
  localStorage.setItem("studentCode", "GUEST");
  localStorage.setItem("studentName", "KhÃ¡ch thi thá»­");
  window.location.href = "thi.html";
}
</script>

  </div>

</body>

</html>
